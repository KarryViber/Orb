import{r as n,E as o}from"./index-ewiXgSs4.js";async function i(s){try{const r=Object.fromEntries(Object.entries(s).filter(([u,a])=>a!==void 0&&a!==""));console.log("[getUserGroups] 发送请求，参数:",r);const e=await n.get("/api/user-groups",{params:r});console.log("[getUserGroups] 原始响应:",e.data);const t={items:e.data.items||[],total:e.data.total||0,page:e.data.page||1,page_size:e.data.pageSize||10};return console.log("[getUserGroups] 处理后的数据:",{itemsLength:t.items.length,items:t.items,total:t.total,page:t.page,page_size:t.page_size}),t}catch(r){return console.error("[getUserGroups] 获取用户组列表失败:",r),o.error("获取用户组列表失败"),{items:[],total:0,page:1,page_size:10}}}async function g(s){try{const r=await n.post("/api/user-groups",s);return o.success("创建用户组成功"),r.data}catch(r){return console.error("创建用户组失败:",r),o.error("创建用户组失败"),null}}async function d(s,r){try{const e=await n.put(`/api/user-groups/${s}`,r);return o.success("更新用户组成功"),e.data}catch(e){return console.error("更新用户组失败:",e),o.error("更新用户组失败"),null}}async function m(s){try{return await n.delete(`/api/user-groups/${s}`),o.success("删除用户组成功"),!0}catch(r){return console.error("删除用户组失败:",r),o.error("删除用户组失败"),!1}}async function U(s){try{console.log("[getGroupUsers] 请求参数:",{groupId:s});const r=await n.get(`/api/user-groups/${s}/users`);if(console.log("[getGroupUsers] 用户ID列表:",r.data),!r.data||!r.data.length)return console.log("[getGroupUsers] 用户组内无成员"),[];const e=await n.get("/api/users",{params:{ids:r.data.join(",")}});return console.log("[getGroupUsers] 用户详情响应:",e.data),e.data&&Array.isArray(e.data.data)?(console.log("[getGroupUsers] 成功获取到用户详情:",e.data.data),e.data.data):(console.log("[getGroupUsers] 未获取到有效的用户详情"),[])}catch(r){return console.error("[getGroupUsers] 获取用户组成员失败:",r),o.error("获取用户组成员失败"),[]}}async function G(s,r){var e,t,u;try{const a=Array.from(r).map(p=>Number(p));console.log("[addUsersToGroup] 请求参数:",{groupId:s,userIds:a});const c=await n.put(`/api/user-groups/${s}/users`,a);return console.log("[addUsersToGroup] 响应数据:",c.data),o.success("添加用户到用户组成功"),!0}catch(a){return console.error("[addUsersToGroup] 添加用户到用户组失败:",{error:a,message:a.message,response:(e=a.response)==null?void 0:e.data,requestData:{groupId:s,userIds:Array.from(r).map(c=>Number(c))}}),(u=(t=a.response)==null?void 0:t.data)!=null&&u.detail?o.error(`添加用户到用户组失败: ${a.response.data.detail}`):o.error("添加用户到用户组失败"),!1}}async function f(s,r){try{return console.log("[removeUserFromGroup] 请求参数:",{groupId:s,userId:r}),await n.delete(`/api/user-groups/${s}/users/${r}`),o.success("从用户组移除用户成功"),!0}catch(e){return console.error("[removeUserFromGroup] 从用户组移除用户失败:",e),o.error("从用户组移除用户失败"),!1}}export{U as a,G as b,g as c,m as d,i as g,f as r,d as u};
