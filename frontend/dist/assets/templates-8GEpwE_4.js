var p=Object.defineProperty;var u=(o,r,e)=>r in o?p(o,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[r]=e;var l=(o,r,e)=>u(o,typeof r!="symbol"?r+"":r,e);import{r as s,E as t}from"./index-ewiXgSs4.js";import{h as i}from"./apiResponse-6A7YpRFR.js";class m{constructor(){l(this,"baseURL","/api/templates")}async getTemplates(r={}){try{console.log("开始加载模板列表");const e=await s.get(this.baseURL,{params:r});return console.log("Template response:",e),i(e.data)}catch(e){return console.error("获取模板列表失败:",e),t.error("获取模板列表失败"),{items:[],total:0,page:1,page_size:10}}}async getTemplate(r){try{console.log("[getTemplate] 开始获取模板详情, id:",r);const e=await s.get(`${this.baseURL}/${r}`);return console.log("[getTemplate] 获取模板详情成功:",e.data),e.data.data||null}catch(e){return console.error("获取模板详情失败:",e),t.error("获取模板详情失败"),null}}async createTemplate(r){var e;try{const a=await s.post(this.baseURL,r);return t.success("创建模板成功"),((e=a.data)==null?void 0:e.data)||null}catch(a){return console.error("创建模板失败:",a),t.error("创建模板失败"),null}}async updateTemplate(r,e){var a;try{const n=await s.put(`${this.baseURL}/${r}`,e);return t.success("更新模板成功"),((a=n.data)==null?void 0:a.data)||null}catch(n){return console.error("更新模板失败:",n),t.error("更新模板失败"),null}}async deleteTemplate(r){try{return await s.delete(`${this.baseURL}/${r}`),t.success("删除模板成功"),!0}catch(e){return console.error("删除模板失败:",e),t.error("删除模板失败"),!1}}async setDefaultTemplate(r){try{return await s.post(`${this.baseURL}/${r}/default`),t.success("设置默认模板成功"),!0}catch(e){return console.error("设置默认模板失败:",e),t.error("设置默认模板失败"),!1}}async previewTemplate(r,e){var a,n;try{return((n=(a=(await s.post(`${this.baseURL}/${r}/preview`,{variables:e})).data)==null?void 0:a.data)==null?void 0:n.preview)||""}catch(c){return console.error("预览模板失败:",c),t.error("预览模板失败"),""}}}const g=new m;export{g as t};
